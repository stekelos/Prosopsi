<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Πρόγραμμα Προπόνησης Μαραθωνίου</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #2a3d66;
            color: white;
            padding: 20px;
            text-align: center;
        }
        main {
            padding: 20px;
        }
        form {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: 0 auto;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            font-weight: bold;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .form-group button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .form-group button:hover {
            background-color: #45a049;
        }
        .plan-output {
            background-color: white;
            padding: 20px;
            margin-top: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        pre {
            font-family: "Courier New", monospace;
            background-color: #f1f1f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <header>
        <h1>Δημιουργία Προγράμματος Προπόνησης Μαραθωνίου</h1>
    </header>

    <main>
        <form id="trainingForm">
            <div class="form-group">
                <label for="raceDate">Ημερομηνία Αγώνα (YYYY-MM-DD):</label>
                <input type="date" id="raceDate" name="raceDate" required>
            </div>
            <div class="form-group">
                <label for="weeks">Διάρκεια προγράμματος (εβδομάδες):</label>
                <select id="weeks" name="weeks" required>
                    <option value="10">10 εβδομάδες</option>
                    <option value="12">12 εβδομάδες</option>
                    <option value="16">16 εβδομάδες</option>
                    <option value="20">20 εβδομάδες</option>
                    <option value="24">24 εβδομάδες</option>
                </select>
            </div>
            <div class="form-group">
                <label for="startKm">Αρχικά Χιλιόμετρα (π.χ. 30.0):</label>
                <input type="number" step="0.1" id="startKm" name="startKm" required>
            </div>
            <div class="form-group">
                <button type="submit">Δημιουργία Προγράμματος</button>
            </div>
        </form>

        <div class="plan-output" id="planOutput" style="display: none;">
            <h2>Πρόγραμμα Προπόνησης</h2>
            <pre id="planText"></pre>
        </div>
    </main>

    <script>
        document.getElementById('trainingForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const raceDate = new Date(document.getElementById('raceDate').value);
            const weeks = parseInt(document.getElementById('weeks').value);
            const startKm = parseFloat(document.getElementById('startKm').value);

            const plan = generateTrainingPlan(raceDate, weeks, startKm);
            document.getElementById('planOutput').style.display = 'block';
            document.getElementById('planText').textContent = formatTrainingPlan(plan);
        });

        function generateTrainingPlan(raceDate, weeks, startKm) {
            const plan = [];
            let currentKm = startKm;
            const startDate = new Date(raceDate);
            startDate.setDate(raceDate.getDate() - 7 * (weeks - 1)); // Align to Monday

            for (let week = 0; week < weeks; week++) {
                const weekPlan = {};
                const weekStart = new Date(startDate);
                weekStart.setDate(startDate.getDate() + week * 7);

                weekPlan.week = week + 1;
                weekPlan.startDate = weekStart.toISOString().split('T')[0];

                if (week === weeks - 1) {
                    currentKm = Math.round(currentKm * 0.5 * 10) / 10;
                } else if (week > 0) {
                    currentKm = Math.round(currentKm * 1.1 * 10) / 10;
                }

                weekPlan.totalKm = currentKm;

                const longRunKm = Math.round(currentKm * 0.27 * 10) / 10;
                let easyRunKm = Math.round((currentKm - longRunKm) / 4 * 10) / 10;

                if (week < 2 || week === weeks - 1) {
                    weekPlan.days = [
                        { day: "Δευτέρα", type: "Easy Run", distance: easyRunKm },
                        { day: "Τετάρτη", type: "Easy Run", distance: easyRunKm },
                        { day: "Πέμπτη", type: "Easy Run", distance: easyRunKm },
                        { day: "Παρασκευή", type: "Easy Run", distance: easyRunKm },
                        { day: "Κυριακή", type: "Long Run", distance: longRunKm }
                    ];
                } else if (week <= 5) {
                    weekPlan.days = [
                        { day: "Δευτέρα", type: "Easy Run", distance: easyRunKm },
                        { day: "Τετάρτη", type: "Repetition", distance: 1.8, details: "9×200μ" },
                        { day: "Πέμπτη", type: "Easy Run", distance: easyRunKm },
                        { day: "Παρασκευή", type: "Threshold", distance: 7.3, details: "2000μ" },
                        { day: "Κυριακή", type: "Long Run", distance: longRunKm }
                    ];
                } else {
                    const intervalKm = Math.round(currentKm * 0.07 * 10) / 10;
                    const thresholdKm = Math.round(currentKm * 0.20 * 10) / 10;
                    const remainingKm = currentKm - intervalKm - thresholdKm - longRunKm;
                    easyRunKm = Math.round(remainingKm / 2 * 10) / 10;

                    weekPlan.days = [
                        { day: "Δευτέρα", type: "Easy Run", distance: easyRunKm },
                        { day: "Τετάρτη", type: "Interval", distance: intervalKm, details: "800μ" },
                        { day: "Πέμπτη", type: "Easy Run", distance: easyRunKm },
                        { day: "Παρασκευή", type: "Threshold", distance: thresholdKm, details: "2000μ" },
                        { day: "Κυριακή", type: "Long Run", distance: longRunKm }
                    ];
                }

                plan.push(weekPlan);
            }

            return plan;
        }

        function formatTrainingPlan(plan) {
            let output = "### Πρόγραμμα Προπόνησης Μαραθωνίου ###\n\n";
            plan.forEach(week => {
                output += `Εβδομάδα ${week.week} (Αρχή: ${week.startDate}):\n`;
                week.days.forEach(day => {
                    output += `${day.day}: ${day.type} - ${day.distance} χλμ`;
                    if (day.details) {
                        output += ` (${day.details})`;
                    }
                    output += "\n";
                });
                output += "===\n";
            });
            return output;
        }
    </script>
</body>
</html>
